<!-- app/views/deals/new.html.erb -->

<h1>New Deal</h1>

<%= form_for([@deal], url: category_deals_path) do |f| %>
  <div>
    <%= f.label :name, 'Deal Name' %>
    <%= f.text_field :name %>
  </div>

  <div>
    <%= f.label :amount, 'Deal Amount' %>
    <%= f.number_field :amount %>
  </div>

  <!-- Add a select dropdown for categories -->
  <div>
    <%= f.label :category_ids, 'Select Categories' %>
    <%= f.collection_select :category_ids, Category.all, :id, :name, { prompt: 'Select categories' }, multiple: true, required: true %>
  </div>

  <div>
    <%= f.submit 'Create Deal' %>
  </div>
<% end %>

<%= link_to 'Back to Category', category_path(@category) %>